{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nimport Layout from '../components/layout/index.vue';\nvar routes = [{\n  path: '/login',\n  name: 'Login',\n  component: function component() {\n    return import('../views/login/index.vue');\n  },\n  meta: {\n    title: '登录'\n  }\n}, {\n  path: '/',\n  component: Layout,\n  redirect: '/file',\n  children: [{\n    path: 'file',\n    name: 'File',\n    component: function component() {\n      return import('../views/file/index.vue');\n    },\n    meta: {\n      title: '文件管理',\n      requiresAuth: true\n    }\n  }, {\n    path: 'tag',\n    name: 'Tag',\n    component: function component() {\n      return import('../views/tag/index.vue');\n    },\n    meta: {\n      title: '标签管理',\n      requiresAuth: true\n    }\n  }, {\n    path: 'backup',\n    name: 'Backup',\n    component: function component() {\n      return import('../views/backup/index.vue');\n    },\n    meta: {\n      title: '备份管理',\n      requiresAuth: true\n    }\n  }, {\n    path: 'log',\n    name: 'Log',\n    component: function component() {\n      return import('../views/log/index.vue');\n    },\n    meta: {\n      title: '日志管理',\n      requiresAuth: true,\n      requiresAdmin: true\n    }\n  }]\n}];\nvar router = createRouter({\n  history: createWebHistory(),\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  var token = localStorage.getItem('token');\n  var userRole = localStorage.getItem('userRole');\n  if (to.meta.requiresAuth && !token) {\n    next('/login');\n  } else if (to.meta.requiresAdmin && userRole !== 'admin') {\n    next('/file');\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Layout","routes","path","name","component","meta","title","redirect","children","requiresAuth","requiresAdmin","router","history","beforeEach","to","from","next","token","localStorage","getItem","userRole"],"sources":["/home/devbox/project/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\nimport Layout from '../components/layout/index.vue';\n\nconst routes = [\n  {\n    path: '/login',\n    name: 'Login',\n    component: () => import('../views/login/index.vue'),\n    meta: { title: '登录' }\n  },\n  {\n    path: '/',\n    component: Layout,\n    redirect: '/file',\n    children: [\n      {\n        path: 'file',\n        name: 'File',\n        component: () => import('../views/file/index.vue'),\n        meta: { title: '文件管理', requiresAuth: true }\n      },\n      {\n        path: 'tag',\n        name: 'Tag',\n        component: () => import('../views/tag/index.vue'),\n        meta: { title: '标签管理', requiresAuth: true }\n      },\n      {\n        path: 'backup',\n        name: 'Backup',\n        component: () => import('../views/backup/index.vue'),\n        meta: { title: '备份管理', requiresAuth: true }\n      },\n      {\n        path: 'log',\n        name: 'Log',\n        component: () => import('../views/log/index.vue'),\n        meta: { title: '日志管理', requiresAuth: true, requiresAdmin: true }\n      }\n    ]\n  }\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\n\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('token');\n  const userRole = localStorage.getItem('userRole');\n\n  if (to.meta.requiresAuth && !token) {\n    next('/login');\n  } else if (to.meta.requiresAdmin && userRole !== 'admin') {\n    next('/file');\n  } else {\n    next();\n  }\n});\n\nexport default router;\n"],"mappings":";;;AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,OAAOC,MAAM,MAAM,gCAAgC;AAEnD,IAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAE,SAAXA,SAASA,CAAA;IAAA,OAAQ,MAAM,CAAC,0BAA0B,CAAC;EAAA;EACnDC,IAAI,EAAE;IAAEC,KAAK,EAAE;EAAK;AACtB,CAAC,EACD;EACEJ,IAAI,EAAE,GAAG;EACTE,SAAS,EAAEJ,MAAM;EACjBO,QAAQ,EAAE,OAAO;EACjBC,QAAQ,EAAE,CACR;IACEN,IAAI,EAAE,MAAM;IACZC,IAAI,EAAE,MAAM;IACZC,SAAS,EAAE,SAAXA,SAASA,CAAA;MAAA,OAAQ,MAAM,CAAC,yBAAyB,CAAC;IAAA;IAClDC,IAAI,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEG,YAAY,EAAE;IAAK;EAC5C,CAAC,EACD;IACEP,IAAI,EAAE,KAAK;IACXC,IAAI,EAAE,KAAK;IACXC,SAAS,EAAE,SAAXA,SAASA,CAAA;MAAA,OAAQ,MAAM,CAAC,wBAAwB,CAAC;IAAA;IACjDC,IAAI,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEG,YAAY,EAAE;IAAK;EAC5C,CAAC,EACD;IACEP,IAAI,EAAE,QAAQ;IACdC,IAAI,EAAE,QAAQ;IACdC,SAAS,EAAE,SAAXA,SAASA,CAAA;MAAA,OAAQ,MAAM,CAAC,2BAA2B,CAAC;IAAA;IACpDC,IAAI,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEG,YAAY,EAAE;IAAK;EAC5C,CAAC,EACD;IACEP,IAAI,EAAE,KAAK;IACXC,IAAI,EAAE,KAAK;IACXC,SAAS,EAAE,SAAXA,SAASA,CAAA;MAAA,OAAQ,MAAM,CAAC,wBAAwB,CAAC;IAAA;IACjDC,IAAI,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEG,YAAY,EAAE,IAAI;MAAEC,aAAa,EAAE;IAAK;EACjE,CAAC;AAEL,CAAC,CACF;AAED,IAAMC,MAAM,GAAGb,YAAY,CAAC;EAC1Bc,OAAO,EAAEb,gBAAgB,CAAC,CAAC;EAC3BE,MAAM,EAANA;AACF,CAAC,CAAC;AAEFU,MAAM,CAACE,UAAU,CAAC,UAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAK;EACpC,IAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAMC,QAAQ,GAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EAEjD,IAAIL,EAAE,CAACT,IAAI,CAACI,YAAY,IAAI,CAACQ,KAAK,EAAE;IAClCD,IAAI,CAAC,QAAQ,CAAC;EAChB,CAAC,MAAM,IAAIF,EAAE,CAACT,IAAI,CAACK,aAAa,IAAIU,QAAQ,KAAK,OAAO,EAAE;IACxDJ,IAAI,CAAC,OAAO,CAAC;EACf,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAEF,eAAeL,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}